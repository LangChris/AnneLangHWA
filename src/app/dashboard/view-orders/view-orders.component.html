<div class="filter-box">
    <div class="header">Orders <i class="fa fa-bars"></i></div>
  
    <span id="filter-dropdown" class="closed" (click)="toggleFilters()">Filters</span>
    <p *ngIf="!showFilters"><small>Click to expand filters</small></p>
    <table class="filter-table-wrapper" *ngIf="showFilters">
      <tr>
        <td>
          <table class="filter-table">
            <tr>
              <th>Sort</th>
              <td>
                <select id="sort" (change)="filter()">
                  <option value="ASC" [selected]="dashboard.filter.sort == 'ASC'">Oldest to Newest</option>
                  <option value="DESC" [selected]="dashboard.filter.sort == 'DESC'">Newest to Oldest</option>
                </select>
              </td>
            </tr>
            <tr>
              <th>Timeline</th>
              <td>
                <select id="timeline" (change)="filter()">
                  <option value="all">All Orders</option>
                  <option value="last-1-day">Today</option>
                  <option value="last-7-days">Last 7 Days</option>
                  <option value="last-30-days">Last 30 Days</option>
                  <option value="last-60-days">Last 60 Days</option>
                  <option value="last-90-days">Last 90 Days</option>
                </select>
              </td>
            </tr>
            <tr>
              <th>Plan</th>
              <td>
                <select id="plan" (change)="filter()">
                  <option value="all">All Plans</option>
                  <option value="GOLD">Gold</option>
                  <option value="PLATINUM">Platinum</option>
                  <option value="DIAMOND">Diamond</option>
                  <option value="FREE_SELLERS_COVERAGE">Free Sellers Coverage</option>
                </select>
              </td>
            </tr>
            <tr>
              <th>Years</th>
              <td>
                <select id="years" (change)="filter()">
                  <option value="all">All Years</option>
                  <option value="13 Months">13 Months</option>
                  <option value="2 Years">2 Years</option>
                  <option value="3 Years">3 Years</option>
                </select>
              </td>
            </tr>
            <tr>
              <th>Entered</th>
              <td>
                <select id="entered" (change)="filter()">
                  <option value="all">All Orders</option>
                  <option value="entered">Entered</option>
                  <option value="not-entered">Not Entered</option>
                </select>
              </td>
            </tr>
            <tr>
              <th>HomeType</th>
              <td>
                <select id="home-type" (change)="filter()">
                  <option value="all">All Homes</option>
                  <option value="SINGLE_FAMILY_HOME">Single Family Home</option>
                  <option value="TOWNHOME_CONDO">Townhome/Condo</option>
                </select>
              </td>
            </tr>
            <tr>
              <th>Realtor</th>
              <td>
                <select id="realtor" (change)="filter()">
                  <option value="all">All Realtors</option>
                  <option *ngFor="let realtor of dashboard.realtors" value="{{realtor}}">{{realtor}}</option>
                </select>
              </td>
            </tr>
            <tr>
              <th>Filename</th>
              <td><input type="text" id="filename" value="{{filename}}" (keydown)="updateFilename($event)" (paste)="updateFilename($event)"/>.{{extension}}</td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  
  </div>
  <div *ngIf="!dashboard.orders || dashboard.orders.length == 0" class="centered-block top-margin">
    <p>No orders placed yet.</p>
  </div>
  <p class="top-margin" *ngIf="dashboard.orders && dashboard.orders.length > 0">Results: {{dashboard.orders.length}} <span *ngIf="global.GetSession().type == 'ADMIN'">({{enteredOrders.length}} entered)</span></p>
  <div *ngIf="dashboard.orders && dashboard.orders.length > 0" style="overflow-x:auto"> 
    <table class="table" #TABLE>  
      <thead>  
        <tr>  
          <th>Name</th>  
          <th>Email</th>  
          <th>Plan</th>
          <th>Years</th>
          <th>Optional Coverage</th>
          <th>Hvac Coverage</th>
          <th>Close/Start Date</th>
          <th>Home Type</th>
          <th>Address</th>
          <th>Buyer Name</th>
          <th>Buyer Email</th>
          <th>Buyer Phone</th>
          <th>Seller Name</th>
          <th>Seller Email</th>
          <th>Seller Phone</th>
          <th>Realtor Name</th>
          <th>Realtor Email</th>
          <th>Realtor Company</th>
          <th>Realtor Zip</th>
          <th>Title Agent Email</th>
          <th>Promo</th>
          <th>Special Request</th>
        </tr>  
      </thead>  
      <tbody>  
        <tr *ngFor="let order of dashboard.orders" id="{{order.orderId}}" (mouseenter)="showOrderEntered(true, order.orderId)" (mouseleave)="showOrderEntered(false, order.orderId)" >  
          <td data-th="Name">
            <div class="top-wrapper"><span style="display: none" id="order-entered-{{order.orderId}}" class="check order-entered" (click)="enterOrder(order)" ></span></div>
            <div class="bottom-wrapper">{{order.name}}</div>
          </td>  
          <td data-th="Email">{{order.email}}</td>
          <td data-th="Plan">{{formatOrder(order.plan)}}</td>
          <td data-th="Years">{{formatOrder(order.years)}}</td>
          <td data-th="Optional Coverage">{{formatOrder(order.optionalCoverage)}}</td>
          <td data-th="Hvac Coverage">{{formatOrder(order.hvacCoverage)}}</td>
          <td data-th="Close/Start Date">{{formatOrder(order.closeStartDateString)}}</td>
          <td data-th="Home Type">{{formatOrder(order.homeType)}}</td>
          <td data-th="Address">{{formatOrder(order.address.addressLine)}}<br />&nbsp;{{formatOrder(order.address.city)}},{{formatOrder(order.address.state)}} {{formatOrder(order.address.zip)}}</td>
          <td data-th="Buyer Name" *ngIf="order.buyer != null">{{formatOrder(order.buyer.name)}}</td>
          <td data-th="Buyer Name" *ngIf="order.buyer == null">--</td>
          <td data-th="Buyer Email" *ngIf="order.buyer != null">{{formatOrder(order.buyer.email)}}</td>
          <td data-th="Buyer Email" *ngIf="order.buyer == null">--</td>
          <td data-th="Buyer Phone" *ngIf="order.buyer != null">{{formatOrder(order.buyer.phone)}}</td>
          <td data-th="Buyer Phone" *ngIf="order.buyer == null">--</td>
          <td data-th="Seller Name" *ngIf="order.seller != null">{{formatOrder(order.seller.name)}}</td>
          <td data-th="Seller Name" *ngIf="order.seller == null">--</td>
          <td data-th="Seller Email" *ngIf="order.seller != null">{{formatOrder(order.seller.email)}}</td>
          <td data-th="Seller Email" *ngIf="order.seller == null">--</td>
          <td data-th="Seller Phone" *ngIf="order.seller != null">{{formatOrder(order.seller.phone)}}</td>
          <td data-th="Seller Phone" *ngIf="order.seller == null">--</td>
          <td data-th="Realtor Name" *ngIf="order.realtor != null">{{formatOrder(order.realtor.name)}}</td>
          <td data-th="Realtor Name" *ngIf="order.realtor == null">--</td>
          <td data-th="Realtor Email" *ngIf="order.realtor != null">{{formatOrder(order.realtor.email)}}</td>
          <td data-th="Realtor Email" *ngIf="order.realtor == null">--</td>
          <td data-th="Realtor Company" *ngIf="order.realtor != null">{{formatOrder(order.realtor.company)}}</td>
          <td data-th="Realtor Company" *ngIf="order.realtor == null">--</td>
          <td data-th="Realtor Zip" *ngIf="order.realtor != null">{{formatOrder(order.realtor.zip)}}</td>
          <td data-th="Realtor Zip" *ngIf="order.realtor == null">--</td>
          <td data-th="Title Agent Email" *ngIf="order.titleAgent != null">{{formatOrder(order.titleAgent.email)}}</td>
          <td data-th="Title Agent Email" *ngIf="order.titleAgent == null">--</td>
          <td data-th="Promo">{{formatOrder(order.promo)}}</td>
          <td data-th="Special Request">{{formatOrder(order.specialRequest)}}</td>
        </tr>  
      </tbody>  
    </table> 
  </div> 
  <div class="centered-block top-padding">
    <button *ngIf="dashboard.orders && dashboard.orders.length > 0" class="export" (click)="ExportToExcel()"></button>  
    <button class="top-margin home" (click)="dashboard.updateDisplay('DASHBOARD');"></button>
  </div>